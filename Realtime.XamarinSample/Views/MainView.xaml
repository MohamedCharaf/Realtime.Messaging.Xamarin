<?xml version="1.0" encoding="UTF-8"?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms" xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml" x:Class="Realtime.XamarinSample.MainView" Title="Realtime for Xamarin">
	<ContentPage.Resources>
        <ResourceDictionary>
            <Style TargetType="Button">
                <Setter Property="FontSize" Value="Large"/>
            </Style>
            <Style TargetType="Label">
                <Setter Property="FontSize" Value="Large"/>
            </Style>
        </ResourceDictionary>
    </ContentPage.Resources>
    <ContentPage.Content>
		<StackLayout Orientation="Vertical">

			<StackLayout Orientation="Vertical" IsVisible="{Binding IsDisconnected}">
				<Label FontAttributes="Bold" Text="Identity" />
				<Entry Text="{Binding ClientMeta}" HorizontalOptions="FillAndExpand" />
				<StackLayout Orientation="Horizontal">
					<Label FontAttributes="Bold" Text="Disconnected" TextColor="Red" FontSize="32" HorizontalOptions="StartAndExpand" />
					<Button Text="Connect" BackgroundColor="Green" Clicked="DoConnect" HorizontalOptions="EndAndExpand" />
				</StackLayout>
				<Label FontAttributes="Bold" Text="" />
				<Label FontAttributes="Bold" Text="Output" />
				<ListView ItemsSource="{Binding Messages}" SeparatorVisibility="Default">
					<ListView.ItemTemplate>
						<DataTemplate>
							<ViewCell>
								<ViewCell.View>
										<Label Text="{Binding Content}" TextColor="{Binding Color}" FontAttributes="Bold" HorizontalOptions="StartAndExpand" />
								</ViewCell.View>
							</ViewCell>
						</DataTemplate>
					</ListView.ItemTemplate>
				</ListView>
			</StackLayout>

			<StackLayout Orientation="Vertical" IsVisible="{Binding IsConnecting}">
				<Label FontAttributes="Bold" Text="Identity" />
				<Label Text="{Binding ClientMeta}" HorizontalOptions="FillAndExpand" />
				<StackLayout Orientation="Horizontal">
					<Label FontAttributes="Bold" Text="Connecting..." TextColor="Yellow" FontSize="32" HorizontalOptions="StartAndExpand" />
					<Button Text="Stop" BackgroundColor="Red" Clicked="DoDisconnect" HorizontalOptions="EndAndExpand" />
				</StackLayout>
				<Label FontAttributes="Bold" Text="" />
				<Label FontAttributes="Bold" Text="Output" />
				<ListView ItemsSource="{Binding Messages}" SeparatorVisibility="Default">
					<ListView.ItemTemplate>
						<DataTemplate>
							<ViewCell>
								<ViewCell.View>
										<Label Text="{Binding Content}" TextColor="{Binding Color}" FontAttributes="Bold" HorizontalOptions="StartAndExpand" />
								</ViewCell.View>
							</ViewCell>
						</DataTemplate>
					</ListView.ItemTemplate>
				</ListView>
			</StackLayout>

			<StackLayout Orientation="Vertical" IsVisible="{Binding IsConnected}">
				<Label FontAttributes="Bold" Text="Identity" />
				<Label Text="{Binding ClientMeta}" HorizontalOptions="FillAndExpand" />
				<StackLayout Orientation="Horizontal">
					<Label FontAttributes="Bold" Text="Connected" TextColor="Green" FontSize="32" HorizontalOptions="StartAndExpand" />
					<Button Text="Disconnect" BackgroundColor="Red" Clicked="DoDisconnect" HorizontalOptions="EndAndExpand" />
				</StackLayout>

				<Label FontAttributes="Bold" Text="" />
				<Label FontAttributes="Bold" Text="Presence" />
				<StackLayout Orientation="Horizontal">
					<Switch IsEnabled="false" IsToggled="{Binding HasPresence}" HorizontalOptions="StartAndExpand" />
					<Button Text="Enable Presence"  Clicked="DoEnablePresence" HorizontalOptions="FillAndExpand" />
					<Button Text="Disable Presence" Clicked="DoDisablePresence" HorizontalOptions="FillAndExpand" />
					<Button Text="Get Presence" Clicked="DoPresence" HorizontalOptions="FillAndExpand" />
				</StackLayout>

				<Label FontAttributes="Bold" Text="" />
				<Label FontAttributes="Bold" Text="Channels" />
				<StackLayout Orientation="Horizontal" >
					<Entry Text="{Binding Channel}" HorizontalOptions="StartAndExpand" WidthRequest="200" />
					<Button Text="Subscribe" Clicked="DoSubscribe" HorizontalOptions="FillAndExpand" />
					<Button Text="Unsubscribe" Clicked="DoUnsubscribe" HorizontalOptions="FillAndExpand" />
				</StackLayout>
				<Label FontAttributes="Italic" Text="{Binding AllChannels}" />

				<Label FontAttributes="Bold" Text="" />
				<Label FontAttributes="Bold" Text="Message"  />
				<StackLayout Orientation="Horizontal">
					<Entry Text="{Binding Message}" WidthRequest="300" HorizontalOptions="StartAndExpand" />
					<Button Text="Send" Clicked="DoSend" HorizontalOptions="FillAndExpand" />
					<Button Text="Send Time" Clicked="DoSendTime" HorizontalOptions="FillAndExpand" />
				</StackLayout>

				<Label FontAttributes="Bold" Text="" />
				<Label FontAttributes="Bold" Text="Output" />
				<ListView ItemsSource="{Binding Messages}" SeparatorVisibility="Default">
					<ListView.ItemTemplate>
						<DataTemplate>
							<ViewCell>
								<ViewCell.View>
										<Label Text="{Binding Content}" TextColor="{Binding Color}" FontAttributes="Bold" HorizontalOptions="StartAndExpand" />
								</ViewCell.View>
							</ViewCell>
						</DataTemplate>
					</ListView.ItemTemplate>
				</ListView>

			</StackLayout>
		</StackLayout>
	</ContentPage.Content>
</ContentPage>